# Установить:
- `PhpStorm` (пока активировать триальный период, потом скину активатор)
- `PHP 8.2` (уже вышел 8.4 с большой обновой, но мне лень накатывать для этого проекта и менять конфигурацию в phpstorm)
- Установить `Composer`
- `Symfony  CLI`
- `NVM` (менеджер версий Node js), потом сделать nvm use <версия>. короче можно пока выбрать любую актуальную версию, потом все определимся, чтобы у всех была одинаковая.
- Установить `npm`
- Установить `pnpm` 
- Перейти в проект и в терминале ввести ```npm install -g pnpm``` - в проекте нужно использовать именно pnpm, он оптимизирует занимаемое место, он лучше короче. Только эта команда неточная, надо попробовать и если что погуглить.
- Далее вы можете делать ```pnpm build``` для сборки фронта и ```pnpm watch``` для автоматической сборки при изменении фронта
- только поставьте переносы строк `LF`, а не CRLF

---

# Далее для разработки (каждый раз, когда переключаемся на другую задачу):
```composer install```

```pnpm build```

```php bin/console doctrine:migrations:migrate``` (это нужно для применения изменений структуры базы, типа бэк меняет структуру, добавляет новые таблицы, столбцы, тем самым создаются миграции, поэтому всем нужно их применить)

```symfony server:start``` - запустить сервер

далее сайт будет доступен на http://127.0.0.1:8000/

![image](https://github.com/user-attachments/assets/8b4a2106-1ca7-431e-bfbd-14223ec23696)

У каждого все будет локально, база у всех своя, поэтому обязательно при переходе к новой задачи запускаем все эти команды

Файл .env содержит переменные окружения, там будут указаны данные о вашей базе

---

# Для работы с гитом:

Создаем ветку от мастера, называем так, как звучит ваша задача:

```git checkout origin/master```

```git fetch```

```git pull```

Ну или `update` в пхп шторме

```git checkout -b «название» origin/master```

коммиты тогда называем так: `Ref <номер таски> | Название коммита`

Изменяете, пушите

## ! Пушить напрямую в мастер нельзя !

После пуша в своей ветки `создаем пулл реквест` в мастер и кидаем его другому бэку/фронту

### Смотрим код, пишем предложения и если все ок, то мержим этот пулл реквест в мастер

---

# Теперь про структуру проекта:
## Инициализация приложения
- Склонировать репизоторий к себе локально
- Перейти в папку прокта
- `composer install`
- `pnpm install`
- `pnpm run build`
- Для локальной проверки можно запустить локальный сервер `symfony server:start --port=8080` и проверить что все работает

## Backend

- Весь код проекта распологается в `src`

## Frontend
- `pnpm install` - установит все необходимые зависимости в проект
- Для сборки приложения, необходимо запустить команду в терминале `pnpm run build`
- Для сборки приложения в `dev mode`, то необходимо запустить команду `pnpm run watch`


### Структура папок
- Все страницы приложения, должны находиться в `js/apps/<pageName>/`
- `Entry point` для отрисовки страницы должен находиться в корне директории, и называться `index.js`
- **Например** `js/apps/mainPage/index.js`
- Корневой компонент должен находится в папке `views`
- **Например** `js/apps/mainPage/views/MainPage.vue`
- Все дополнительные компоненты находятся в папке `components`
- И по аналогии создаются папки для утилит, хелперов и констант и т.п. (`utils, helpers, consts, ...`)

### Shared
- Все переиспользуемые утилиты, компоненты, `api` нужно складывать в `js/shared/*`
- Например `ui` компоненты будут лежать в `js/shared/ui`

Все страницы приложения, должны находиться в `js/apps/<pageName>/`
- Entry point для отрисовки страницы должен находиться в корне директории, и называться `index.js`
- Корневой компонент должен находится в папке `views`
- Все дополнительные компоненты находятся в папке `components`
- И по аналогии создаются папки для утилит, хелперов и констант и т.п. (utils, helpers, consts, ...)

# Как фронтенд общается с бэкендом

Пользователь переходит по URL, контроллер его обрабатывает и рендерит Twig. В нем опрокидывается файл Vue и фронт пишется в нем.

Также при необходимости с бека можно передать в twig какие-то данные, а из twig их передать на vue.

https://symfony.ru/doc/current/templates.html

В ином случае во vue файле нужно отправлять `fetch` запрос на получение данных на определенный URL, а бэк отправляет ответ.
